<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head>&lt; <title itemprop=name>Home Assistant Container Part 6: Editing configuration.yaml from within Home Assistant :: Sequr (dev)</title>
<script defer language=javascript type=text/javascript src=/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=robots content="noodp, noydir"><meta name=googlebot content="noodp, noydir"><link rel=canonical href=https://dev.sequr.be/blog/automation/ha_container/pt06_hassconfigurator/ itemprop=url><meta name=url content="https://dev.sequr.be/blog/automation/ha_container/pt06_hassconfigurator/"><link rel=icon href=favicon.ico><meta itemprop=name content="Home Assistant Container Part 6: Editing configuration.yaml from within Home Assistant"><meta itemprop=description content="In this sixth part of the Home Assistant Container series we’ll add the option to modify our config from within HA using HASS Configurator"><meta itemprop=datePublished content="2022-09-08T00:00:00+00:00"><meta itemprop=dateModified content="2022-11-18T00:00:00+00:00"><meta itemprop=wordCount content="463"><meta itemprop=image content="https://dev.sequr.be/blog/automation/ha_container/pt06_hassconfigurator/cover.png"><meta itemprop=keywords content="Home Automation,Home Assistant,Container,Docker,Docker-Compose,HASS,Configurator"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dev.sequr.be/blog/automation/ha_container/pt06_hassconfigurator/cover.png"><meta name=twitter:title content="Home Assistant Container Part 6: Editing configuration.yaml from within Home Assistant"><meta name=twitter:description content="In this sixth part of the Home Assistant Container series we’ll add the option to modify our config from within HA using HASS Configurator"><meta property="og:url" content="https://dev.sequr.be/blog/automation/ha_container/pt06_hassconfigurator/"><meta property="og:site_name" content="Sequr (dev)"><meta property="og:title" content="Home Assistant Container Part 6: Editing configuration.yaml from within Home Assistant"><meta property="og:description" content="In this sixth part of the Home Assistant Container series we’ll add the option to modify our config from within HA using HASS Configurator"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-09-08T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-18T00:00:00+00:00"><meta property="article:tag" content="Home Automation"><meta property="article:tag" content="Home Assistant"><meta property="article:tag" content="Container"><meta property="article:tag" content="Docker"><meta property="article:tag" content="Docker-Compose"><meta property="article:tag" content="HASS"><meta property="og:image" content="https://dev.sequr.be/blog/automation/ha_container/pt06_hassconfigurator/cover.png"><meta name=description content="In this sixth part of the Home Assistant Container series we&rsquo;ll add the option to modify our config from within HA using HASS Configurator"><meta itemprop=description content="In this sixth part of the Home Assistant Container series we&rsquo;ll add the option to modify our config from within HA using HASS Configurator"><meta property="og:updated_time" content="2022-11-18T00:00:00Z"><link rel=sitemap type=application/xml title=Sitemap href=https://dev.sequr.be/sitemap.xml><meta name=apple-mobile-web-app-title content="Sequr (dev)"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><link type=text/css rel=stylesheet href=/css/bundle.min.94a339836f89f0d25f31980cb6b0631da21e20af128308747ce44e0525eb16ef.css integrity="sha256-lKM5g2+J8NJfMZgMtrBjHaIeIK8Sgwh0fOROBSXrFu8=" crossorigin=anonymous><style>body{--sidebar-bg-color:#202020;--sidebar-img-border-color:#515151;--sidebar-p-color:#909090;--sidebar-h1-color:#FFF;--sidebar-a-color:#FFF;--sidebar-socials-color:#FFF;--text-color:#222;--bkg-color:#FAF9F6;--post-title-color:#303030;--list-color:#5A5A5A;--link-color:#268BD2;--date-color:#515151;--table-border-color:#E5E5E5;--table-stripe-color:#F9F9F9;--code-color:#000;--code-background-color:#E5E5E5;--code-block-color:#FFF;--code-block-background-color:#272822;--moon-sun-color:#FFF;--moon-sun-background-color:#515151}body.dark-theme{--text-color:#EEE;--bkg-color:#121212;--post-title-color:#DBE2E9;--list-color:#9D9D9D;--link-color:#268BD2;--date-color:#9A9A9A;--table-border-color:#515151;--table-stripe-color:#202020;--code-color:#FFF;--code-background-color:#515151;--code-block-color:#FFF;--code-block-background-color:#272822}body{background-color:var(--bkg-color)}</style></head><body><div class=wrapper><aside class=sidebar><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class=sidebar-about><h1 class=brand><a href=https://dev.sequr.be/><img src=logo.png alt="brand image">
</a><a href=https://dev.sequr.be/><h1>Sequr (dev)</h1></a></h1><p class=lead>Dev version of sequr.be. This site may break at any time.</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/about/>About</a></li><li class=heading>Blog</li><li class=heading><a href=/privacy/>Privacy</a></li></ul></nav><a target=_blank class=social title="RSS Feed" href=/posts/index.xml><svg width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><p class=footnote>&copy; 2019
• <a class="p-name u-url" href=https://sequr.be>DezeStijn</a>
• &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0&lt;/a></p></div></aside><main class="content container"><div class=post><div class=info><h1 class=post-title><a href=https://dev.sequr.be/blog/automation/ha_container/pt06_hassconfigurator/>Home Assistant Container Part 6: Editing configuration.yaml from within Home Assistant</a></h1><div class=headline><div><span>DezeStijn - </span><time datetime=2022-09-08T00:00:00Z class=post-date>September 8, 2022
</time><span>- </span><span class=reading-time><span>3 mins read</span></span></div><ul class=tags><li class="tag-Home Automation"><a href=https://dev.sequr.be/tags/home-automation>Home Automation</a></li><li class="tag-Home Assistant"><a href=https://dev.sequr.be/tags/home-assistant>Home Assistant</a></li><li class=tag-Container><a href=https://dev.sequr.be/tags/container>Container</a></li><li class=tag-Docker><a href=https://dev.sequr.be/tags/docker>Docker</a></li><li class=tag-docker-compose><a href=https://dev.sequr.be/tags/docker-compose>docker-compose</a></li><li class=tag-HASS><a href=https://dev.sequr.be/tags/hass>HASS</a></li><li class=tag-Configurator><a href=https://dev.sequr.be/tags/configurator>Configurator</a></li></ul></div></div><h2 id=intro>Intro</h2><p>We&rsquo;re continuing where we left off after <a href=https://dev.sequr.be/blog/automation/ha_container/pt05_nodered/ title="Part 5: Node-RED">Part 5: Node-RED</a>.</p><p>So far we&rsquo;ve been editing our <code>configuration.yaml</code> through the terminal.
While this definitely works, it does mean we need to open the terminal and SSH to our Docker system each time we want to make a configuration change.
Since in the previous posts we&rsquo;ve been adding our add-ons to the dashboard view of Home Assistant, we&rsquo;ll do the same for our config editing thanks to <a href=https://github.com/danielperna84/hass-configurator title="danielperna84/hass-configurator on GitHub" target=_blank>HASS Configurator</a>.</p><h2 id=install-hass-configurator>Install HASS Configurator</h2><h3 id=docker-compose>Docker-compose</h3><p>We expand our <code>docker-compose.yaml</code> with the config for the HASS Configurator container.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  [<span style=color:#ae81ff>...]</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>hass-configurator</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>hassconf</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>causticlab/hass-configurator-docker</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;3218:3218/tcp&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>/opt/hassconf/config:/config</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>/opt/homeassistant/config:/hass-config</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>depends_on</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>homeassistant</span>
</span></span></code></pre></div><h3 id=hass-configurator-config>HASS-Configurator config</h3><p>We can also make some changes to <a href=https://github.com/danielperna84/hass-configurator/wiki/Configuration title="HASS Configurator config" target=_blank>the configuration</a> of the HASS Configurator.</p><p>Either manually create the config directory or start the container so Docker creates it for us.
Then create a config file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mkdir -p /opt/hassconf/config
</span></span><span style=display:flex><span>sudo nano /opt/hassconf/config/settings.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add the following lines and close+save using Ctrl+X</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;BASEPATH&#34;</span>: <span style=color:#e6db74>&#34;/hass-config&#34;</span>,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;ENFORCE_BASEPATH&#34;</span>: true,
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;DIRSFIRST&#34;</span>: true
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>The config above makes sure the Configurator opens in the directory holding our HA config.
It also limits the editor to opening files within this folder. So you cannot access files outside this folder (e.g. system configuration).<br>The last setting results in the file browser to display directories before files instead of mixing both in an alphabetically sorted list.</p><h3 id=start-and-access-the-configurator>Start and access the Configurator</h3><p>If we then run <code>docker-compose up -d</code> Docker will pull the image and will launch it.
Did you make changes to the config after starting the container? Restart or rebuild it.</p><p>Once running, the editor can be reached at <code>http://&lt;ip.of.our.box>:3218</code>.</p><h2 id=home-assistant-sidebar>Home Assistant Sidebar</h2><p>As we did with Portainer in <a href=https://dev.sequr.be/blog/automation/ha_container/pt03_mariadb_influxdb/ title="Part 3: MariaDB and InfluxDB">previous</a> <a href=https://dev.sequr.be/blog/automation/ha_container/pt05_nodered/ title="Part 5: Node-RED">blog posts</a>, we add an entry for the Configuration Editor to the sidebar of our Home Assistant dashboard using the <code>panel-iframe</code>.</p><p>Add the following lines to <code>configuration.yaml</code> (via the terminal or using the editor we just launched):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>panel_iframe</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>portainer</span>:     <span style=color:#75715e># part 3</span>
</span></span><span style=display:flex><span>    [<span style=color:#ae81ff>...]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>nodered</span>:       <span style=color:#75715e># part 5</span>
</span></span><span style=display:flex><span>    [<span style=color:#ae81ff>...]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>configurator</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>title</span>: <span style=color:#ae81ff>Configurator</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:wrench</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>: <span style=color:#ae81ff>http://192.168.10.106:3218</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>require_admin</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><p>Go to the Developer Tools in Home Assistant and restart HA.</p><p>Once Home Assistant is back online, the entry for the Configurator will appear in the sidebar and we can now make changes to e.g. <code>configuration.yaml</code> and <code>secrets.yaml</code> from within the HA Dashboard.</p><figure class=center><img src=cover.png alt="HASS-Configurator opened in the HA Dashboard"><figcaption class=center>Editing HA config from within Home Assistant</figcaption></figure><h2 id=pro-tip-mount-docker-config>Pro tip: mount docker-config</h2><p>Want to be able to modify your <code>docker-compose.yaml</code> configuration without having to SSH onto your Docker system?
Mount the Docker Compose config file inside You HASS Configurator container!</p><p>Inside the config editor tool, the Docker Compose file will appear as if it&rsquo;s inside your Home Assistant configuration structure, but it&rsquo;s not :)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>hass-configurator</span>:
</span></span><span style=display:flex><span>    [<span style=color:#ae81ff>...]</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>/opt/docker-compose.yaml:/hass-config/docker-compose.yaml</span>
</span></span></code></pre></div><figure class=center><img src=dockercompose.png alt="docker-compose.yaml inside the HASS-Config file explorer"><figcaption class=center>Editing docker-compose.yaml from within Home Assistant</figcaption></figure><hr><div class=footer><a class=previous-post href="https://dev.sequr.be/blog/automation/ha_container/pt05_nodered/?ref=footer"><span style=font-weight:700>« Previous</span><br>Home Assistant Container Part 5: Node-RED</a><div class=next-post><a href="https://dev.sequr.be/blog/automation/ha_container/pt07_backup/?ref=footer"><span style=font-weight:700>Next »</span><br>Home Assistant Container Part 7: Backing up Home...</a></div></div></div></main><div class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#install-hass-configurator>Install HASS Configurator</a><ul><li><a href=#docker-compose>Docker-compose</a></li><li><a href=#hass-configurator-config>HASS-Configurator config</a></li><li><a href=#start-and-access-the-configurator>Start and access the Configurator</a></li></ul></li><li><a href=#home-assistant-sidebar>Home Assistant Sidebar</a></li><li><a href=#pro-tip-mount-docker-config>Pro tip: mount docker-config</a></li></ul></nav></div></div></div></body></html>