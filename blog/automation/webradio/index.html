<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head>&lt; <title itemprop=name>Playing webradio (and other audio) from Lovelace dashboard :: Sequr (dev)</title>
<script defer language=javascript type=text/javascript src=/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=robots content="noodp, noydir"><meta name=googlebot content="noodp, noydir"><link rel=canonical href=https://dev.sequr.be/blog/automation/webradio/ itemprop=url><meta name=url content="https://dev.sequr.be/blog/automation/webradio/"><link rel=icon href=favicon.ico><meta itemprop=name content="Playing webradio (and other audio) from Lovelace dashboard"><meta itemprop=description content="Starting live webradio or any audio stream on your smart speakers via your Lovelace dashboard"><meta itemprop=datePublished content="2021-08-14T00:00:00+01:00"><meta itemprop=dateModified content="2021-08-14T00:00:00+01:00"><meta itemprop=wordCount content="1200"><meta itemprop=image content="https://dev.sequr.be/blog/automation/webradio/cover.png"><meta itemprop=keywords content="Home Automation,Lovelace,Webradio,Smart Speaker"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dev.sequr.be/blog/automation/webradio/cover.png"><meta name=twitter:title content="Playing webradio (and other audio) from Lovelace dashboard"><meta name=twitter:description content="Starting live webradio or any audio stream on your smart speakers via your Lovelace dashboard"><meta property="og:url" content="https://dev.sequr.be/blog/automation/webradio/"><meta property="og:site_name" content="Sequr (dev)"><meta property="og:title" content="Playing webradio (and other audio) from Lovelace dashboard"><meta property="og:description" content="Starting live webradio or any audio stream on your smart speakers via your Lovelace dashboard"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-08-14T00:00:00+01:00"><meta property="article:modified_time" content="2021-08-14T00:00:00+01:00"><meta property="article:tag" content="Home Automation"><meta property="article:tag" content="Lovelace"><meta property="article:tag" content="Webradio"><meta property="article:tag" content="Smart Speaker"><meta property="og:image" content="https://dev.sequr.be/blog/automation/webradio/cover.png"><meta name=description content="Starting live webradio or any audio stream on your smart speakers via your Lovelace dashboard"><meta itemprop=description content="Starting live webradio or any audio stream on your smart speakers via your Lovelace dashboard"><meta property="og:updated_time" content="2021-08-14T00:00:00+01:00"><link rel=sitemap type=application/xml title=Sitemap href=https://dev.sequr.be/sitemap.xml><meta name=apple-mobile-web-app-title content="Sequr (dev)"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><link type=text/css rel=stylesheet href=/css/bundle.min.94a339836f89f0d25f31980cb6b0631da21e20af128308747ce44e0525eb16ef.css integrity="sha256-lKM5g2+J8NJfMZgMtrBjHaIeIK8Sgwh0fOROBSXrFu8=" crossorigin=anonymous><style>body{--sidebar-bg-color:#202020;--sidebar-img-border-color:#515151;--sidebar-p-color:#909090;--sidebar-h1-color:#FFF;--sidebar-a-color:#FFF;--sidebar-socials-color:#FFF;--text-color:#222;--bkg-color:#FAF9F6;--post-title-color:#303030;--list-color:#5A5A5A;--link-color:#268BD2;--date-color:#515151;--table-border-color:#E5E5E5;--table-stripe-color:#F9F9F9;--code-color:#000;--code-background-color:#E5E5E5;--code-block-color:#FFF;--code-block-background-color:#272822;--moon-sun-color:#FFF;--moon-sun-background-color:#515151}body.dark-theme{--text-color:#EEE;--bkg-color:#121212;--post-title-color:#DBE2E9;--list-color:#9D9D9D;--link-color:#268BD2;--date-color:#9A9A9A;--table-border-color:#515151;--table-stripe-color:#202020;--code-color:#FFF;--code-background-color:#515151;--code-block-color:#FFF;--code-block-background-color:#272822}body{background-color:var(--bkg-color)}</style></head><body><div class=wrapper><aside class=sidebar><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class=sidebar-about><h1 class=brand><a href=https://dev.sequr.be/><img src=logo.png alt="brand image">
</a><a href=https://dev.sequr.be/><h1>Sequr (dev)</h1></a></h1><p class=lead>Dev version of sequr.be. This site may break at any time.</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/about/>About</a></li><li class=heading>Blog</li><li class=heading><a href=/privacy/>Privacy</a></li></ul></nav><a target=_blank class=social title="RSS Feed" href=/posts/index.xml><svg width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><p class=footnote>&copy; 2019
• <a class="p-name u-url" href=https://sequr.be>DezeStijn</a>
• &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0&lt;/a></p></div></aside><main class="content container"><div class=post><div class=info><h1 class=post-title><a href=https://dev.sequr.be/blog/automation/webradio/>Playing webradio (and other audio) from Lovelace dashboard</a></h1><div class=headline><div><span>DezeStijn - </span><time datetime=2021-08-14T00:00:00+0100 class=post-date>August 14, 2021
</time><span>- </span><span class=reading-time><span>6 mins read</span></span></div><ul class=tags><li class="tag-Home Automation"><a href=https://dev.sequr.be/tags/home-automation>Home Automation</a></li><li class=tag-Lovelace><a href=https://dev.sequr.be/tags/lovelace>Lovelace</a></li><li class=tag-Webradio><a href=https://dev.sequr.be/tags/webradio>Webradio</a></li><li class="tag-Smart speaker"><a href=https://dev.sequr.be/tags/smart-speaker>Smart speaker</a></li></ul></div></div><h2 id=introduction>Introduction</h2><p>One of the nice things about smart speakers is that they can play audio from a wide variety of sources.
Combine this with Home Assistant and you have yourself a webradio and custom audio dashboard :)</p><p>This blog post will explain my setup and will provide you with the code and pointers needed to build your own version of it.</p><figure class=center><img src=ha-webradio.png alt="Screenshot of webradio dashboard"><figcaption class=center>Webradio control center</figcaption></figure><p>Note that I&rsquo;m setting this all up in YAML.
Helpers like the dropdown and textbox can also be created using the UI.
At the end of this blog posts, it&rsquo;ll become clear why I&rsquo;m doing everything in YAML.</p><h2 id=set-up>Set-up</h2><p>To set everything up, we&rsquo;ll need some helpers that&rsquo;ll provide a dropdown and a textbox, some scripts, and some Lovelace elements.</p><p>Let&rsquo;s go through each part step-by-step.
I&rsquo;ll provide the full code at the end of this blogpost.</p><h3 id=helpers>Helpers</h3><p>These helpers will provide the dropdown selection of radio stations and a text field to enter our own URLs into.</p><p>Feel free to adapt the list of radio stations to your choosing.
Finding the correct URL is often the hardest part.
Check if your favorite station has a web player and whether you can extract the URL of the stream from the address bar or the network requests.
There are also online services that will provide you with streams for lots of webradio stations.</p><h4 id=radio-station-dropdown>Radio station dropdown</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>input_select</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>radio_station</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Pick station&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:radio</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>initial</span>: <span style=color:#ae81ff>VRT Studio Brussel</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>options</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>VRT Radio 1</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>VRT Studio Brussel</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>VRT MNM</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>VRT NWS</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>Topradio</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>Qmusic</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>VBRO</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>Willy Radio</span>
</span></span></code></pre></div><h4 id=custom-url-textbox>Custom URL textbox</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>input_text</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>url</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>URL</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>min</span>: <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>max</span>: <span style=color:#ae81ff>255</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:web</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>mode</span>: <span style=color:#ae81ff>text</span>
</span></span></code></pre></div><h3 id=scripts>Scripts</h3><h4 id=play-from-dropdown>Play from dropdown</h4><p>The code below will be called by a button on our dashboard and will play the station that&rsquo;s selected in the dropdown.</p><p>Optionally, it will also provide an image (the logo of the radio station) to be displayed on our Lovelace dashboard while playing.
For this you&rsquo;ll need to download the logos or images you want and store them in (a subfolder of) <code>/config/www/</code> which will be referenced as <code>/local/</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>script</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>play_radio</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>alias</span>: <span style=color:#ae81ff>Play radio</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:play</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Play web radio on smart speaker</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>mode</span>: <span style=color:#ae81ff>restart</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>sequence</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>media_player.volume_set</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>volume_level</span>: <span style=color:#ae81ff>0.10</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>media_player.play_media</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>media_content_type</span>: <span style=color:#ae81ff>music</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>media_content_id</span>: &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {%- set station = states(&#39;input_select.radio_station&#39;) -%}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {% if station == &#34;VRT Radio 1&#34; %} http://icecast.vrtcdn.be/radio1-high.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {% elif station == &#34;VRT Studio Brussel&#34; %} http://icecast.vrtcdn.be/stubru-high.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {% elif station == &#34;VRT Studio Brussel - #ikluisterbelgisch&#34; %} http://icecast.vrtcdn.be/stubru_tgs-high.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {% elif station == &#34;VRT MNM&#34; %} http://icecast.vrtcdn.be/mnm-high.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {% elif station == &#34;VRT NWS&#34; %} http://progressive-audio.lwc.vrtcdn.be/content/fixed/11_11niws-snip_hi.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {% elif station == &#34;Topradio&#34; %} https://str.topradio.be/topradio.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {% elif station == &#34;Qmusic&#34; %} https://21293.live.streamtheworld.com/QMUSIC.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {% elif station == &#34;VBRO&#34; %} https://radiohuis.com/VBRO
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {% elif station == &#34;Willy Radio&#34; %} http://20723.live.streamtheworld.com/WILLY.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            {% endif %}</span>            
</span></span><span style=display:flex><span>          <span style=color:#f92672>extra</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>thumb</span>: &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {%- set station = states(&#39;input_select.radio_station&#39;) -%}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% if &#39;Studio Brussel&#39; in station %}  https://&lt;your_HA_URL&gt;/local/img/logo/logo_stubru.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif &#39;MNM&#39; in station %} https://&lt;your_HA_URL&gt;/local/img/logo/logo_mnm.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif &#39;NWS&#39; in station %} https://&lt;your_HA_URL&gt;/local/img/logo/logo_vrtnws.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station[:3] == &#34;VRT&#34; %} https://&lt;your_HA_URL&gt;/local/img/logo/logo_vrt.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;Topradio&#34; %} https://&lt;your_HA_URL&gt;/local/img/logo/logo_topradio.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;Qmusic&#34; %} https://&lt;your_HA_URL&gt;/local/img/logo/logo_qmusic.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;VBRO&#34; %} https://&lt;your_HA_URL&gt;/local/img/logo/logo_vbro.png
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;Willy Radio&#34; %} https://&lt;your_HA_URL&gt;/local/img/logo/logo_willy.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% endif %}</span>              
</span></span><span style=display:flex><span>            <span style=color:#f92672>stream_type</span>: <span style=color:#ae81ff>LIVE</span>
</span></span></code></pre></div><h4 id=play-custom-url>Play custom URL</h4><p>For this script we&rsquo;ll also need the <code>media_extractor</code> <a href=https://www.home-assistant.io/integrations/media_extractor/ title="Media Extractor integration" target=_blank>integration</a>.
This uses <code>youtube_dl</code> to extract the audio stream from the video/stream/audoclip/&mldr; you give it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>media_extractor</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>script</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>play_media_url</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>alias</span>: <span style=color:#ae81ff>Play media from URL</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>mode</span>: <span style=color:#ae81ff>single</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:music-box-multiple-outline</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>sequence</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>media_player.media_stop</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>target</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>media_player.volume_set</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>volume_level</span>: <span style=color:#ae81ff>0.10</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>media_extractor.play_media</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>media_content_type</span>: <span style=color:#ae81ff>MUSIC</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>media_content_id</span>: <span style=color:#e6db74>&#34;{{ states(&#39;input_text.url&#39;) }}&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>target</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span></code></pre></div><h3 id=lovelace-dashboard>Lovelace Dashboard</h3><p>You can design your dashboard anyway you like.</p><p>I chose to use the <a href=https://github.com/kalkih/mini-media-player title="Mini Media Player on Github" target=_blank>Mini Media Player</a> custom card to display what&rsquo;s playing on my smart speaker.
You can find it on <a href=https://hacs.xyz/ title="Home Assistant Community Store" target=_blank>HACS</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>vertical-stack</span>
</span></span><span style=display:flex><span><span style=color:#f92672>cards</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>type</span>: <span style=color:#ae81ff>custom:mini-media-player</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>group</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>artwork</span>: <span style=color:#ae81ff>cover</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>source</span>: <span style=color:#ae81ff>full</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>sound_mode</span>: <span style=color:#ae81ff>full</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>info</span>: <span style=color:#ae81ff>short</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Living Room</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>idle_view</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>when_idle</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entity</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>type</span>: <span style=color:#ae81ff>entities</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entities</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>entity</span>: <span style=color:#ae81ff>input_select.radio_station</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>station</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>entity</span>: <span style=color:#ae81ff>script.play_radio</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>tap_action</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>action</span>: <span style=color:#ae81ff>call-service</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>service</span>: <span style=color:#ae81ff>script.turn_on</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>service_data</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>script.play_radio</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>type</span>: <span style=color:#ae81ff>entities</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entities</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>entity</span>: <span style=color:#ae81ff>input_text.url</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>URL</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>entity</span>: <span style=color:#ae81ff>script.play_media_url</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>tap_action</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>action</span>: <span style=color:#ae81ff>call-service</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>service</span>: <span style=color:#ae81ff>script.turn_on</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>service_data</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>script.play_media_url</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:play</span>
</span></span></code></pre></div><h2 id=complete-code>Complete code</h2><p>Below you&rsquo;ll find the complete code for this blog post.</p><p>The reason I chose to define everything in YAML, including the helpers, is because I&rsquo;ve split up my config in <a href=https://www.home-assistant.io/docs/configuration/packages/ title=Packages target=_blank>packages</a>.
This allows me to group to bundle related configurations together, making it easier to find all components.</p><p>If you don&rsquo;t want to use packages, just move the code snippets to the relevant configurations (e.g. <code>scripts.yaml</code>).</p><p><strong>configuration.yaml</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>homeassistant</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>packages</span>: !<span style=color:#ae81ff>include_dir_merge_named packages/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Decided to keep this here as multiple packages may use this single integration</span>
</span></span><span style=display:flex><span><span style=color:#f92672>media_extractor</span>:
</span></span></code></pre></div><p><strong>packages/mediaplayers/media_url.yaml</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#75715e># Play custom audio stream on smart speaker(s)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># https://www.home-assistant.io/integrations/media_extractor/</span>
</span></span><span style=display:flex><span><span style=color:#75715e># https://www.home-assistant.io/integrations/input_text/</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#f92672>media_url</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>script</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>play_media_url</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>alias</span>: <span style=color:#ae81ff>Play media from URL</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>mode</span>: <span style=color:#ae81ff>single</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:music-box-multiple-outline</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>sequence</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>media_player.media_stop</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>target</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>media_player.volume_set</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>volume_level</span>: <span style=color:#ae81ff>0.10</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>media_extractor.play_media</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>media_content_type</span>: <span style=color:#ae81ff>MUSIC</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>media_content_id</span>: <span style=color:#e6db74>&#34;{{ states(&#39;input_text.url&#39;) }}&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>target</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>input_text</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>url</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>URL</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>min</span>: <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>max</span>: <span style=color:#ae81ff>255</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:web</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>mode</span>: <span style=color:#ae81ff>text</span>
</span></span></code></pre></div><p><strong>packages/mediaplayers/webradio.yaml</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#75715e># Play webradio on smart speaker(s)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Based on https://community.home-assistant.io/t/chromecast-radio-with-station-and-player-selection/12732</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># https://www.home-assistant.io/integrations/media_player</span>
</span></span><span style=display:flex><span><span style=color:#75715e># https://www.home-assistant.io/integrations/input_select/</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#f92672>webradio</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>script</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>play_radio</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>alias</span>: <span style=color:#ae81ff>Play radio</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:play</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Play web radio on Chromecast</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>mode</span>: <span style=color:#ae81ff>restart</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>sequence</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>media_player.volume_set</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>volume_level</span>: <span style=color:#ae81ff>0.10</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>service</span>: <span style=color:#ae81ff>media_player.play_media</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>media_content_type</span>: <span style=color:#ae81ff>music</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>media_content_id</span>: &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {%- set station = states(&#39;input_select.radio_station&#39;) -%}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% if station == &#34;VRT Radio 1&#34; %} http://icecast.vrtcdn.be/radio1-high.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;VRT Studio Brussel&#34; %} http://icecast.vrtcdn.be/stubru-high.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;VRT Studio Brussel - #ikluisterbelgisch&#34; %} http://icecast.vrtcdn.be/stubru_tgs-high.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;VRT MNM&#34; %} http://icecast.vrtcdn.be/mnm-high.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;VRT NWS&#34; %} http://progressive-audio.lwc.vrtcdn.be/content/fixed/11_11niws-snip_hi.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;Topradio&#34; %} https://str.topradio.be/topradio.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;Qmusic&#34; %} https://21293.live.streamtheworld.com/QMUSIC.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;VBRO&#34; %} https://radiohuis.com/VBRO
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% elif station == &#34;Willy Radio&#34; %} http://20723.live.streamtheworld.com/WILLY.mp3
</span></span></span><span style=display:flex><span><span style=color:#e6db74>              {% endif %}</span>              
</span></span><span style=display:flex><span>            <span style=color:#f92672>extra</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>thumb</span>: &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                {%- set station = states(&#39;input_select.radio_station&#39;) -%}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                {% if &#39;Studio Brussel&#39; in station %}  https://&lt;my_homeassistant&gt;/local/img/logo/logo_stubru.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                {% elif &#39;MNM&#39; in station %} https://&lt;my_homeassistant&gt;/local/img/logo/logo_mnm.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                {% elif &#39;NWS&#39; in station %} https://&lt;my_homeassistant&gt;/local/img/logo/logo_vrtnws.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                {% elif station[:3] == &#34;VRT&#34; %} https://&lt;my_homeassistant&gt;/local/img/logo/logo_vrt.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                {% elif station == &#34;Topradio&#34; %} https://&lt;my_homeassistant&gt;/local/img/logo/logo_topradio.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                {% elif station == &#34;Qmusic&#34; %} https://&lt;my_homeassistant&gt;/local/img/logo/logo_qmusic.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                {% elif station == &#34;VBRO&#34; %} https://&lt;my_homeassistant&gt;/local/img/logo/logo_vbro.png
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                {% elif station == &#34;Willy Radio&#34; %} https://&lt;my_homeassistant&gt;/local/img/logo/logo_willy.svg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                {% endif %}</span>                
</span></span><span style=display:flex><span>              <span style=color:#f92672>stream_type</span>: <span style=color:#ae81ff>LIVE</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>input_select</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>radio_station</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;Kies radiostation&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:radio</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>initial</span>: <span style=color:#ae81ff>VRT Studio Brussel</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>options</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>VRT Radio 1</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>VRT Studio Brussel</span>
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;VRT Studio Brussel - #ikluisterbelgisch&#34;</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>VRT MNM</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>VRT NWS</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>Topradio</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>Qmusic</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>Topradio</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>VBRO</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>Willy Radio</span>
</span></span></code></pre></div><p><strong>Lovelace dashboard</strong></p><p>Add new card > Manual.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>vertical-stack</span>
</span></span><span style=display:flex><span><span style=color:#f92672>cards</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>type</span>: <span style=color:#ae81ff>custom:mini-media-player</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>group</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>artwork</span>: <span style=color:#ae81ff>cover</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>source</span>: <span style=color:#ae81ff>full</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>sound_mode</span>: <span style=color:#ae81ff>full</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>info</span>: <span style=color:#ae81ff>short</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Living Room</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>idle_view</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>when_idle</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entity</span>: <span style=color:#ae81ff>media_player.livingroom</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>type</span>: <span style=color:#ae81ff>entities</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entities</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>entity</span>: <span style=color:#ae81ff>input_select.radio_station</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>station</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>entity</span>: <span style=color:#ae81ff>script.play_radio</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>tap_action</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>action</span>: <span style=color:#ae81ff>call-service</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>service</span>: <span style=color:#ae81ff>script.turn_on</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>service_data</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>script.play_radio</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>type</span>: <span style=color:#ae81ff>entities</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entities</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>entity</span>: <span style=color:#ae81ff>input_text.url</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>URL</span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>entity</span>: <span style=color:#ae81ff>script.play_media_url</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>tap_action</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>action</span>: <span style=color:#ae81ff>call-service</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>service</span>: <span style=color:#ae81ff>script.turn_on</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>service_data</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>entity_id</span>: <span style=color:#ae81ff>script.play_media_url</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>icon</span>: <span style=color:#ae81ff>mdi:play</span>
</span></span></code></pre></div><p>Enjoy playing your favourite radio station on your smart speakers!</p><hr><div class=footer><a class=previous-post href="https://dev.sequr.be/blog/general/migrate_windows_ssd/?ref=footer"><span style=font-weight:700>« Previous</span><br>Migrating from HDD to SSD</a><div class=next-post><a href="https://dev.sequr.be/blog/automation/energy_monitoring/?ref=footer"><span style=font-weight:700>Next »</span><br>Monitoring electricity consumption and production...</a></div></div></div></main><div class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#set-up>Set-up</a><ul><li><a href=#helpers>Helpers</a><ul><li><a href=#radio-station-dropdown>Radio station dropdown</a></li><li><a href=#custom-url-textbox>Custom URL textbox</a></li></ul></li><li><a href=#scripts>Scripts</a><ul><li><a href=#play-from-dropdown>Play from dropdown</a></li><li><a href=#play-custom-url>Play custom URL</a></li></ul></li><li><a href=#lovelace-dashboard>Lovelace Dashboard</a></li></ul></li><li><a href=#complete-code>Complete code</a></li></ul></nav></div></div></div></body></html>