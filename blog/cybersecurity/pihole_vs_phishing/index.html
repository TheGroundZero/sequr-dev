<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head>&lt; <title itemprop=name>Pi-hole vs Phishing :: Sequr (dev)</title>
<script defer language=javascript type=text/javascript src=/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=robots content="noodp, noydir"><meta name=googlebot content="noodp, noydir"><link rel=canonical href=https://dev.sequr.be/blog/cybersecurity/pihole_vs_phishing/ itemprop=url><meta name=url content="https://dev.sequr.be/blog/cybersecurity/pihole_vs_phishing/"><link rel=icon href=favicon.ico><meta itemprop=name content="Pi-hole vs Phishing"><meta itemprop=description content="The Pi-hole is a powerful tool against tracking but can be used to protect against phishing as well."><meta itemprop=datePublished content="2020-03-20T00:00:00+00:00"><meta itemprop=dateModified content="2023-01-30T00:00:00+00:00"><meta itemprop=wordCount content="765"><meta itemprop=image content="https://dev.sequr.be/blog/cybersecurity/pihole_vs_phishing/cover.jpg"><meta itemprop=keywords content="Pi-Hole,PiHole,Spam,Tracking,Advertisements,Ads,Phishing"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dev.sequr.be/blog/cybersecurity/pihole_vs_phishing/cover.jpg"><meta name=twitter:title content="Pi-hole vs Phishing"><meta name=twitter:description content="The Pi-hole is a powerful tool against tracking but can be used to protect against phishing as well."><meta property="og:url" content="https://dev.sequr.be/blog/cybersecurity/pihole_vs_phishing/"><meta property="og:site_name" content="Sequr (dev)"><meta property="og:title" content="Pi-hole vs Phishing"><meta property="og:description" content="The Pi-hole is a powerful tool against tracking but can be used to protect against phishing as well."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-03-20T00:00:00+00:00"><meta property="article:modified_time" content="2023-01-30T00:00:00+00:00"><meta property="article:tag" content="Pi-Hole"><meta property="article:tag" content="PiHole"><meta property="article:tag" content="Spam"><meta property="article:tag" content="Tracking"><meta property="article:tag" content="Advertisements"><meta property="article:tag" content="Ads"><meta property="og:image" content="https://dev.sequr.be/blog/cybersecurity/pihole_vs_phishing/cover.jpg"><meta name=description content="The Pi-hole is a powerful tool against tracking but can be used to protect against phishing as well."><meta itemprop=description content="The Pi-hole is a powerful tool against tracking but can be used to protect against phishing as well."><meta property="og:updated_time" content="2023-01-30T00:00:00Z"><link rel=sitemap type=application/xml title=Sitemap href=https://dev.sequr.be/sitemap.xml><meta name=apple-mobile-web-app-title content="Sequr (dev)"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><link type=text/css rel=stylesheet href=/css/bundle.min.94a339836f89f0d25f31980cb6b0631da21e20af128308747ce44e0525eb16ef.css integrity="sha256-lKM5g2+J8NJfMZgMtrBjHaIeIK8Sgwh0fOROBSXrFu8=" crossorigin=anonymous><style>body{--sidebar-bg-color:#202020;--sidebar-img-border-color:#515151;--sidebar-p-color:#909090;--sidebar-h1-color:#FFF;--sidebar-a-color:#FFF;--sidebar-socials-color:#FFF;--text-color:#222;--bkg-color:#FAF9F6;--post-title-color:#303030;--list-color:#5A5A5A;--link-color:#268BD2;--date-color:#515151;--table-border-color:#E5E5E5;--table-stripe-color:#F9F9F9;--code-color:#000;--code-background-color:#E5E5E5;--code-block-color:#FFF;--code-block-background-color:#272822;--moon-sun-color:#FFF;--moon-sun-background-color:#515151}body.dark-theme{--text-color:#EEE;--bkg-color:#121212;--post-title-color:#DBE2E9;--list-color:#9D9D9D;--link-color:#268BD2;--date-color:#9A9A9A;--table-border-color:#515151;--table-stripe-color:#202020;--code-color:#FFF;--code-background-color:#515151;--code-block-color:#FFF;--code-block-background-color:#272822}body{background-color:var(--bkg-color)}</style></head><body><div class=wrapper><aside class=sidebar><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class=sidebar-about><h1 class=brand><a href=https://dev.sequr.be/><img src=logo.png alt="brand image">
</a><a href=https://dev.sequr.be/><h1>Sequr (dev)</h1></a></h1><p class=lead>Dev version of sequr.be. This site may break at any time.</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/about/>About</a></li><li class=heading>Blog</li><li class=heading><a href=/privacy/>Privacy</a></li></ul></nav><a target=_blank class=social title="RSS Feed" href=/posts/index.xml><svg width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><p class=footnote>&copy; 2019
• <a class="p-name u-url" href=https://sequr.be>DezeStijn</a>
• &lt;a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0&lt;/a></p></div></aside><main class="content container"><div class=post><div class=info><h1 class=post-title><a href=https://dev.sequr.be/blog/cybersecurity/pihole_vs_phishing/>Pi-hole vs Phishing</a></h1><div class=headline><div><span>DezeStijn - </span><time datetime=2020-03-20T00:00:00Z class=post-date>March 20, 2020
</time><span>- </span><span class=reading-time><span>4 mins read</span></span></div><ul class=tags><li class=tag-Pi-hole><a href=https://dev.sequr.be/tags/pi-hole>Pi-hole</a></li><li class=tag-PiHole><a href=https://dev.sequr.be/tags/pihole>PiHole</a></li><li class=tag-spam><a href=https://dev.sequr.be/tags/spam>spam</a></li><li class=tag-tracking><a href=https://dev.sequr.be/tags/tracking>tracking</a></li><li class=tag-advertisements><a href=https://dev.sequr.be/tags/advertisements>advertisements</a></li><li class=tag-ads><a href=https://dev.sequr.be/tags/ads>ads</a></li><li class=tag-phishing><a href=https://dev.sequr.be/tags/phishing>phishing</a></li></ul></div></div><h2 id=pi-hole>Pi-Hole</h2><p>If you&rsquo;ve ever done some research on protecting yourself against online tracking, you&rsquo;ve definitely seen articles discussing <a href=https://pi-hole.net title="Pi-hole - Network-wide Ad Blocking" target=_blank>Pi-hole</a>, a network-wide ad blocking service/tool.</p><p>You can install Pi-hole on just about any hardware (including a <a href=https://www.raspberrypi.org title="Raspberry Pi" target=_blank>Raspberry Pi</a>) or as a VM. I switched from a Raspberry Pi to a Linux Containers (LXC) on <a href=https://www.proxmox.com title="Proxmox - powerful open-source server solutions" target=_blank>Proxmox</a>.<br>After you installed your Pi-hole instance, you configure the devices on your home network to use it as their primary DNS server.
In a more advanced network, you can use DHCP leases or an Active Directory environment to automatically configure your clients.
This is especially usefull when you can&rsquo;t manually configure DNS on your clients (e.g. IoT or roaming devices).
If you can&rsquo;t configure DHCP leases (e.g. ISP-provided modem/router combo), you can configure your Pi-hole instance to also act as a DHCP server, handing out IP addresses and configuring DNS.<br>This wide variety of configurations and features makes Pi-hole an incredibly powerfull asset in protecting your online activity against unwanted tracking.</p><p>The actual installation of Pi-hole is outside the scope of this blog post, mainly because there are hundreds if not thousands of tutorials available online.
I advise you to start with the <a href=https://docs.pi-hole.net title="Pi-hole documentation" target=_blank>official documentation</a>.</p><h2 id=blocklists>Blocklists</h2><p>You can configure your Pi-hole instance to one or more &ldquo;safe&rdquo; upstream DNS providers, like OpenDNS and Quad9, which provide some protection against unwanted websites as they provide some DNS filtering.<br>Some upstream providers are also configured to use DNSSEC, which will allow the Pi-hole to validate the signature of DNS responses, protecting against DNS response modifications.</p><p>One of the main features of Pi-hole, however, is its blocklists.
These blocklists are consolidated by Gravity, an internal Pi-hole script, into a one unique list used by the DNS resolver to block or whitelist DNS queries.</p><p>Pi-hole by default includes some lists that will block domains linked to tracking by advertisement companies.
As such, your online browsing is already much &ldquo;cleaner&rdquo; as soon as your clients use Pi-hole for their DNS queries.</p><h2 id=pi-hole-vs-phishing>Pi-hole vs Phishing</h2><p>Now we come to the crux of this blog post: weaponising your Pi-hole instance to help protect you against phishing.</p><p>Phishing attacks often include the use of malicious domains hosting copies of legitimate websites.
These domains eventually get picked up by antimalware and/or threat intel companies, who often also compile lists of &ldquo;bad domains&rdquo;.</p><p>We can use these lists to help protect users on our network against phishing.<br>Note that this won&rsquo;t protect you against phishing sites hosted on legitimate domains (e.g. sharepoint) or which haven&rsquo;t been flagged yet.</p><p><a href=https://www.phishing.army title="Phishing Army" target=_blank>Phishing Army</a> is one of the organisations compiling lists of phishing related domains.
Their list, which is updated every six hours, includes reports from <a href=https://www.phishtank.com title=PhishTank target=_blank>PhishTank</a>, <a href=https://openphish.com title=OpenPhish target=_blank>OpenPhish</a> and <a href=https://github.com/mitchellkrogza/Phishing.Database title="PhishFindR / Phishing.Database" target=_blank>PhishFindR</a>.</p><p>Adding this list to Pi-hole is very easy.</p><p>Login on the Pi-Hole admin portal.
You can find it at <code>http://&lt;pi-hole IP>/admin</code></p><figure class=center><img src=login.png alt="Pi-hole login"><figcaption class=center>Pi-hole admin login</figcaption></figure><p>Go to Settings, then Blocklists and add the Phishing Army blocklist URL to the list.</p><p><code>https://phishing.army/download/phishing_army_blocklist.txt</code></p><blockquote><p><strong>Update 2020-07-20</strong><br>Another useful blocklist is that of <a href=https://urlhaus.abuse.ch/ title="URLhaus by Abuse.ch" target=_blank>URLhaus by Abuse.ch</a></p><p><code>https://urlhaus.abuse.ch/downloads/hostfile/</code></p></blockquote><figure class=center><img src=add-blocklist.png alt="Adding the blocklist to Pi-hole"><figcaption class=center>Adding the blocklist to Pi-hole</figcaption></figure><blockquote><p><strong>Update 2020-07-20</strong><br>Clients can now be grouped and adlists can be assigned to those groups.<br>Because of this change, adlists have been moved and can now be found under &ldquo;Group Management&rdquo;.</p></blockquote><p>Click &ldquo;Save and Update&rdquo; to immediately update Gravity, or click &ldquo;Save&rdquo; and manually update Gravity (Tools > Update Gravity).</p><figure class=center><img src=update-gravity.png alt="Updating Gravity"><figcaption class=center>Updating Gravity</figcaption></figure><p>You can check whether the blocklist is functioning correctly by testing a domain you know is present in the blocklist.</p><figure class=center><img src=query.png alt="Blocklist query"><figcaption class=center>Testing the blocklist</figcaption></figure><p>Browsing to this domain, you&rsquo;ll see your system won&rsquo;t be able to find it.
The Pi-hole query log show that the query was blocked via the internal block list (blocked - gravity).
In my case, the domain lookup was also blocked by the upstream DNS provider (blocked - external).</p><figure class=center><img src=log.png alt="Query log"><figcaption class=center>Query log</figcaption></figure><p>Note that Pi-hole automatically updates Gravity every Sunday.
If you want to update more frequently, SSH into your Pi-hole and modify <code>/etc/cron.d/pihole</code>.</p><figure class=center><img src=cron.png alt="Pi-hole crontab"><figcaption class=center>Pi-hole crontab</figcaption></figure><h2 id=upstream-dns>Upstream DNS</h2><p>Another important improvement you can make, is picking a secure and privacy-preserving upstream DNS.
This ensures the DNS queries that weren&rsquo;t blocked by PiHole aren&rsquo;t logged by e.g. your ISP and some upstream DNS providers add the option of using their blocklists as well.</p><p>I personally can recomment <a href="https://nextdns.io/?from=dctv58ke" title="NextDNS - The new firewall for the modern Internet" target=_blank>NextDNS</a> as upstream DNS provider.
Not only do they have additional lists like Threat Intelligence Feeds and Cryptojacking prevention, they also allow you to block newly registred domains (common in phishing) and help protect against DNS rebinding attacks.
Their free plan grants you 300,000 queries per month and upgrading to unlimited costs you less than €20 per year.</p><hr><div class=footer><a class=previous-post href="https://dev.sequr.be/blog/hackthebox/machine/hackthebox-traceback/?ref=footer"><span style=font-weight:700>« Previous</span><br>Traceback</a><div class=next-post><a href="https://dev.sequr.be/blog/hackthebox/challenge/hackthebox-easyphish/?ref=footer"><span style=font-weight:700>Next »</span><br>Easy Phish</a></div></div></div></main><div class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#pi-hole>Pi-Hole</a></li><li><a href=#blocklists>Blocklists</a></li><li><a href=#pi-hole-vs-phishing>Pi-hole vs Phishing</a></li><li><a href=#upstream-dns>Upstream DNS</a></li></ul></nav></div></div></div></body></html>