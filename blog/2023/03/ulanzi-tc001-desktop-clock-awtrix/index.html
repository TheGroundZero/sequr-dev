<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><title itemprop=name>Ulanzi TC001 Desktop Clock - Awtrix :: Sequr (dev)</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=robots content="noodp, noydir"><meta name=googlebot content="noodp, noydir"><link rel=canonical href=https://dev.sequr.be/ itemprop=url><meta name=url content="https://dev.sequr.be/"><link rel=icon href=/favicon.ico><meta itemprop=name content="Sequr (dev)"><meta itemprop=description content="Dev version of sequr.be. This site may break at any time."><meta itemprop=datePublished content="2024-11-20T00:00:00+01:00"><meta itemprop=dateModified content="2024-11-20T00:00:00+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Sequr (dev)"><meta name=twitter:description content="Dev version of sequr.be. This site may break at any time."><meta property="og:url" content="https://dev.sequr.be/"><meta property="og:site_name" content="Sequr (dev)"><meta property="og:title" content="Sequr (dev)"><meta property="og:description" content="Dev version of sequr.be. This site may break at any time."><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><meta name=description content="Dev version of sequr.be. This site may break at any time."><meta itemprop=description content="Dev version of sequr.be. This site may break at any time."><meta property="og:updated_time" content="2024-11-20T00:00:00+01:00"><link rel=sitemap type=application/xml title=Sitemap href=https://dev.sequr.be/sitemap.xml><link href=https://dev.sequr.be/index.xml rel=alternate type=application/rss+xml title="Sequr (dev)"><meta name=apple-mobile-web-app-title content="Sequr (dev)"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><link rel=stylesheet href=/css/bundle.css><script defer type=text/javascript src=/js/bundle.min.145453261a7755f5042a854c4213501d215a8fbe34c08d181c40f803f1315e74.js integrity="sha256-FFRTJhp3VfUEKoVMQhNQHSFaj740wI0YHED4A/ExXnQ=" crossorigin=anonymous></script></head><body class=dark-theme><div class=wrapper><aside class="sidebar h-card background-image"><div class="container sidebar-sticky"><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg class="moon" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg class="sun" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div><div class="sidebar-about hcard"><h1 class=brand><a href=https://dev.sequr.be/><img src=/logo.png class="u-logo u-photo" alt="Sequr (dev) brand image">
</a><a href=https://dev.sequr.be/ class="u-url p-org"><h1>Sequr (dev)</h1></a></h1><p class="lead p-note">Dev version of sequr.be. This site may break at any time.</p></div><nav><ul class=sidebar-nav><li class=heading><a href=/about/ title=About>About</a></li><li class=heading><a href=/blog/ title=Blog>Blog</a></li><li class=sub-heading>Recent</li><li class=bullet><a href=https://dev.sequr.be/blog/2024/09/flashing-the-ikea-vindriktning-with-tasmota-and-esphome/ title="Flashing the IKEA Vindriktning with Tasmota and ESPHome">IKEA Vindriktning in HA</a></li><li class=bullet><a href=https://dev.sequr.be/blog/2024/02/home-assistant-container-part-13-vs-code-code-server/ title="Home Assistant Container Part 13: VS Code code-server">HA Containter pt13: VS Code</a></li><li class=bullet><a href=https://dev.sequr.be/blog/2024/02/flash-xiaomi-lywsd03mmc-ble-sensor-with-zigbee-firmware/ title="Flash Xiaomi LYWSD03MMC BLE sensor with Zigbee firmware">Xiaomi LYWSD03MMC with Zigbee</a></li><li class=bullet><a href=https://dev.sequr.be/blog/2023/12/remotely-opening-and-closing-my-gate/ title="Remotely opening and closing my gate">HA gate controller</a></li><li class=bullet><a href=https://dev.sequr.be/blog/2023/10/2-months-in/ title="2 months in">2 months in</a></li><li class=heading><a href=/shoppinglist/ title="Shopping List">Shopping</a></li><li class=heading><a href=/privacy/ title="Privacy Statement">Privacy</a></li></ul></nav><a target=_blank class=social title="RSS Feed" href=/blog/index.xml><svg width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg>
</a><a href=https://bsky.app/profile/sequr.be target=_blank class="u-url social" rel="external noopener me" title=Bluesky><svg width="1.2em" height="1.2em" viewBox="0 0 568 501"><path fill="currentcolor" d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873c25.719-53.192 95.759-152.3204 160.879-201.2093C491.866-1.61183 568-28.9064 568 57.9464 568 75.2916 558.055 203.659 552.222 224.501c-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281C285.169 375.812 284.017 372.431 284 375.306 283.983 372.431 282.831 375.812 280.369 383.039c-13.43 39.422-65.842 193.273-185.7023 70.281C31.5556 388.56 60.7778 323.8 175.653 304.249 109.933 315.434 36.0535 296.954 15.7778 224.501 9.94525 203.659.0 75.2916.0 57.9464.0-28.9064 76.1345-1.61183 123.121 33.6637z"/></svg></a><a href=https://mastodon-belgium.be/@TerraGloba target=_blank class="u-url social" rel="external noopener me" title=Mastodon><svg width="1.2em" height="1.2em" viewBox="0 0 568 501"><path fill="currentcolor" d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873c25.719-53.192 95.759-152.3204 160.879-201.2093C491.866-1.61183 568-28.9064 568 57.9464 568 75.2916 558.055 203.659 552.222 224.501c-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281C285.169 375.812 284.017 372.431 284 375.306 283.983 372.431 282.831 375.812 280.369 383.039c-13.43 39.422-65.842 193.273-185.7023 70.281C31.5556 388.56 60.7778 323.8 175.653 304.249 109.933 315.434 36.0535 296.954 15.7778 224.501 9.94525 203.659.0 75.2916.0 57.9464.0-28.9064 76.1345-1.61183 123.121 33.6637z"/></svg></a><a href=https://github.com/TheGroundZero target=_blank class="u-url social" rel="external noopener me" title=Github><svg width="1.2em" height="1.2em" viewBox="0 0 568 501"><path fill="currentcolor" d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873c25.719-53.192 95.759-152.3204 160.879-201.2093C491.866-1.61183 568-28.9064 568 57.9464 568 75.2916 558.055 203.659 552.222 224.501c-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281C285.169 375.812 284.017 372.431 284 375.306 283.983 372.431 282.831 375.812 280.369 383.039c-13.43 39.422-65.842 193.273-185.7023 70.281C31.5556 388.56 60.7778 323.8 175.653 304.249 109.933 315.434 36.0535 296.954 15.7778 224.501 9.94525 203.659.0 75.2916.0 57.9464.0-28.9064 76.1345-1.61183 123.121 33.6637z"/></svg></a><a href=https://twitter.com/DezeStijn target=_blank class="u-url social" rel="external noopener me" title=Twitter><svg width="1.2em" height="1.2em" viewBox="0 0 568 501"><path fill="currentcolor" d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873c25.719-53.192 95.759-152.3204 160.879-201.2093C491.866-1.61183 568-28.9064 568 57.9464 568 75.2916 558.055 203.659 552.222 224.501c-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281C285.169 375.812 284.017 372.431 284 375.306 283.983 372.431 282.831 375.812 280.369 383.039c-13.43 39.422-65.842 193.273-185.7023 70.281C31.5556 388.56 60.7778 323.8 175.653 304.249 109.933 315.434 36.0535 296.954 15.7778 224.501 9.94525 203.659.0 75.2916.0 57.9464.0-28.9064 76.1345-1.61183 123.121 33.6637z"/></svg></a><a href=https://ko-fi.com/s4squatch target=_blank class="u-url social" rel="external noopener" title=Kofi><svg width="1.2em" height="1.2em" viewBox="0 0 568 501"><path fill="currentcolor" d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873c25.719-53.192 95.759-152.3204 160.879-201.2093C491.866-1.61183 568-28.9064 568 57.9464 568 75.2916 558.055 203.659 552.222 224.501c-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281C285.169 375.812 284.017 372.431 284 375.306 283.983 372.431 282.831 375.812 280.369 383.039c-13.43 39.422-65.842 193.273-185.7023 70.281C31.5556 388.56 60.7778 323.8 175.653 304.249 109.933 315.434 36.0535 296.954 15.7778 224.501 9.94525 203.659.0 75.2916.0 57.9464.0-28.9064 76.1345-1.61183 123.121 33.6637z"/></svg></a><p class=footnote>&copy; 2019
• <a class="p-name u-url" href=https://sequr.be>DezeStijn</a>
• <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel="external noopener">CC BY-NC-SA 4.0</a></p></div></aside><section class="content container"><article class="post h-entry"><header class=info><h1 class="post-title p-name u-url"><a href=https://dev.sequr.be/blog/2023/03/ulanzi-tc001-desktop-clock-awtrix/>Ulanzi TC001 Desktop Clock - Awtrix</a></h1><div class=headline><div><span class="h-card p-author">DezeStijn
</span><span>• </span><time datetime=2023-03-30T00:00:00+0200 class="post-date dt-published">Mar 30, 2023
</time><time datetime=2023-03-30T00:00:00+0200 class="post-date dt-updated">(Mar 30, 2023)
</time><span>• </span><span class=reading-time><span>6 mins read</span></span></div><ul class=tags><li class="tag-Home Automation"><a class=p-category href=https://dev.sequr.be/tags/home-automation>Home Automation</a></li></ul></div></header><main class=e-content><h2 id=intro>Intro</h2><p>Earlier this month, Blakadder did a <a href=https://blakadder.com/ulanzi-pixel-clock/ title="Ulanzi Desktop Pixel Clock TC001 Review" rel=external target=_blank>review</a> of the Ulanzi Desktop Pixel Clock TC001.
Not much later, I saw some people on Twitter that were playing with it as well.
This triggered me to have a look at this nice desktop clock as well.</p><p>Not soon after I ordered 2 of the Ulanzi TC001 Desktop Clocks, Blakadder <a href=https://nitter.net/blakadder_/status/1638545150937821184 title="@blakadder_: Awtrix Light is now open source" rel=external target=_blank>tweeted</a> about Awtrix Light going open source.</p><p>Having 2 of these clocks, I decided to flash one with the <a href=https://github.com/Blueforcer/awtrix-light title="Blueforcer/awtrix-light on GitHub" rel=external target=_blank>Atrix firmware</a>
and flash the other with ESPHome on a later date (blog post will follow).</p><p>This blog post will describe some of my first experiences flashing the TC001 and setting up some automations for it in Home Assistant.</p><p>If you want to follow along, you can check any of <a href=https://s.click.aliexpress.com/e/_DdQGi7n title="ALCKJST7 Ulanzi TC001 Smart Pixel Clock" rel=external target=_blank>these</a> <a href=https://s.click.aliexpress.com/e/_DF6fOmz title="ALCKY9U2 Ulanzi TC001 Smart Pixel Clock" rel=external target=_blank>three</a> <a href=https://s.click.aliexpress.com/e/_DFr1GHj title="ALCK7527 Ulanzi TC001 Smart Pixel Clock" rel=external target=_blank>links</a> to get yourself one (or more).</p><h2 id=flashing-awtrix-on-the-ulanzi-tc001>Flashing Awtrix on the Ulanzi TC001</h2><h3 id=preparations-for-flashing>Preparations for flashing</h3><p>As the USB-C port to charge the device&rsquo;s battery (yes, it has a battery :)) is also connected to the serial connection of the ESP chip inside.
This means we don&rsquo;t need to open up the device to flash or read firmware on the device. Awesome!</p><p>The serial port should be recognised immediately when you connect the device and power it on.
If not, you may need to install the <a href=https://learn.sparkfun.com/tutorials/how-to-install-ch340-drivers/all#drivers-if-you-need-them title="How to Install CH340 Drivers " rel=external target=_blank>serial driver</a> first.</p><p>We&rsquo;ll also be using <code>esptool</code> which you can install as a Python(3) module using pip:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>python3 -m pip install esptool
</span></span></code></pre></div><h3 id=backup-stock-firmware>Backup stock firmware</h3><p>We start of by backing up the stock firmware of the device.
Should we ever want to return to the stock firmware (e.g. if you need to return it under warranty for a defect),
we can restore this backup image and the device will act the way it did when it arrived at your doorstep.</p><ol><li><p>Connect the desktop pixel clock with a proper USB-C cable to your system and turn it on by holding the <code>&lt;</code> and <code>></code> buttons for 3 seconds.</p></li><li><p>Check whether the device was properly detected and what serial/COM port it was assigned to.</p></li><li><p>Run the following command to take a backup of the firmware and save it as <code>ulanzi_tc001_factory.bin</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>esptool -p COM12 -b <span style=color:#ae81ff>921600</span> read_flash 0x0 0x400000 ulanzi_tc001_factory.bin
</span></span></code></pre></div></li><li><p>Keep a copy of this bin at a safe location so you can retrieve if, if ever needed.</p></li></ol><figure class=center><img src=windows_devicemanager.png alt="Windows device manager showing the device was detected and assigned COM11"><figcaption class=center>Detected and assigned COM11</figcaption></figure><p>Note that the device will be beeping while you&rsquo;re transferring data over serial.</p><h3 id=flashing-awtrix-firmware>Flashing Awtrix firmware</h3><p>This proces is super easy thanks to the <a href=https://blueforcer.github.io/awtrix-light/#/flasher title="Awtrix Light web flasher" rel=external target=_blank>Web Flasher</a> provided by Blueforcer.</p><ol><li>Visit the Web Flasher website with Chrome or Edge</li><li>Click on the Connect button and select the correct COM port</li><li>Select <em>Install Awtrix Light</em> and wait for the flashing to complete.<br>I&rsquo;d advise checking the box for erasing the device prior to flashing.</li></ol><figure class=center><img src=awtrix_flasher.png alt="Awtrix Light web flasher"><figcaption class=center>Flash via web</figcaption></figure><p>Once flashing is done, the device will play a tune (yes, it has a tiny speaker as well :)), and it will go into Access Point mode.
The device will broadcast a WiFi network named <code>AWTRIX LIGHT</code> or <code>awtrix_xxxxxx</code> protected with the password <code>12345678</code>.</p><p>when you connect your phone via WiFi to the Access Point of the device, it should open the device&rsquo;s captive portal.
If that does not happen automatically, open your phone&rsquo;s web browser and go to <a href=http://192.168.4.1 rel=external target=_blank>http://192.168.4.1</a>.</p><p>Enter your WiFi credentials to connect the device to your network.
In the background the device will be looking for WiFi SSIDs, so give it a minute to populate the list if you don&rsquo;t feel like typing your SSID.</p><figure class=center><img src=awtrix_captiveportal.png alt="Awtrix Light captive portal"><figcaption class=center>Configure WiFi settings</figcaption></figure><p>The device will stop broadcasting its own WiFi network and will connect to yours.</p><h2 id=connecting-to-home-assistant>Connecting to Home Assistant</h2><p>Check your router&rsquo;s DHCP lease table to use a network scanner to check what IP the desktop clock has gotten.
Then browse to that IP in your browser.</p><p>The <em>connection</em> between Awtrix Light and Home Assistant happens via MQTT.
If you haven&rsquo;t set up a MQTT broker in Home Assistant yet, you can have a look at some older <a href=https://dev.sequr.be/blog/2022/09/home-assistant-container-part-4-mosquitto-docker-container/ title="Home Assistant Container Part 4: Mosquitto Docker Container">blog</a> <a href=https://dev.sequr.be/blog/2020/10/getting-started-with-mqtt-and-home-assistant-and-shelly/ title="Getting started with MQTT and Home Assistant (and Shelly)">posts</a>.
Since the Awtrix Light firmware is setup for MQTT autodiscovery, we won&rsquo;t need to write any MQTT sensor config ourselves.</p><figure class=center><img src=setup_mqtt.png alt="Awtrix Light MQTT setup"><figcaption class=center>Configure MQTT settings</figcaption></figure><p>After saving, the device should be automatically discovered as a new MQTT integration.
If not, verify your credentials and reboot the device.</p><figure class=center><img src=mqtt_info.png alt="Awtrix Light MQTT info"><figcaption class=center>Integration info</figcaption></figure><h2 id=sending-notifications-to-the-tc001>Sending notifications to the TC001</h2><p>The device will now cycle between the current date, time, battery percentage, humidity, temperature.
This is useful information, but the whole idea of flashing it with custom firmware is to display our own data on it.</p><p>One of the use-cases I have is notifying me when some is at the door by sending a notification to the desktop clock.
To do this, we need to send a MQTT message to the <code>notify</code> topic of the device including everything we want to be displayed and played.</p><h3 id=icon>Icon</h3><p>If you want to display an icon on the device, you can either download it from Lametric, or design your own.</p><p>To download one from Lametric, first get the ID from the icon you want at <a href=https://developer.lametric.com/icons rel=external target=_blank>https://developer.lametric.com/icons</a>.
Then open the web dashboard of your TC001 desktop clock and go to the ICONS tab.
Enter the ID of the icon and click Download.</p><p>You can also design your own pixel icons and upload them to the <code>ICONS</code> folder via the device&rsquo;s filebrowser.</p><h3 id=melody>Melody</h3><p>Melodies are composed as Ring Tone Text Transfer Language (RTTTL) files.
Grab a melody you like from the <a href=https://www.laub-home.de/wiki/rtttl-songs title="RTTTL Songs" rel=external target=_blank>internet</a> or <a href=https://corax89.github.io/esp8266Game/soundEditor.html title="RTTTL Editor" rel=external target=_blank>design your own</a>.
Store the RTTTL string in a <code>.txt</code> file under the <code>MELODIES</code> folder using the device&rsquo;s file browser.</p><p>For example, the following RTTTL string will play a snippet from &ldquo;Are you sleeping, brother John?&rdquo;.
I stored this as <code>MELODIES/john.txt</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-txt data-lang=txt><span style=display:flex><span>John:d=4,o=5,b=125:c,d,e,c,c,d,e,c,d,e,f,p,d,e,f,p,8g,8a,8g,8f,e,c,8g,8a,8g,8f,e,c,c,g4,c,p,c,g4,c
</span></span></code></pre></div><h3 id=notification>Notification</h3><p>You can now test your ability to send a notification to the device manually using the MQTT Integration.
In Home Assistant, go to Settings > Integrations > MQTT > Configure and enter this info (update to fit your config):</p><figure class=center><img src=mqtt_config.png alt="MQTT config to send a notification"><figcaption class=center>Send notification via MQTT</figcaption></figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;text&#34;</span>: <span style=color:#e6db74>&#34;DING DONG&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;icon&#34;</span>: <span style=color:#e6db74>&#34;44330&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;rainbow&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;hold&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;pushIcon&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;sound&#34;</span>: <span style=color:#e6db74>&#34;john&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>You should notice the TC001 is playing your tune and displaying your notification.</p><p>To dismiss the notification, press the center button on top of the desktop clock or send an empty MQTT payload to <code>[PREFIX]/notify/dismiss</code>.</p><h3 id=automation>Automation</h3><p>Let&rsquo;s not put this all together in an automation.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>automation</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>alias</span>: <span style=color:#ae81ff>Awtrix - doorbell notification</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>description</span>: <span style=color:#ae81ff>Send a doorbell notification to the Ulanzi TC001</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>awtrix_doorbell_notification</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>mode</span>: <span style=color:#ae81ff>single</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>trigger</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>state</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>entity_id</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>binary_sensor.doorbell_button</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>to</span>: <span style=color:#e6db74>&#34;on&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>alias</span>: <span style=color:#ae81ff>Doorbell is pressed</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>condition</span>: []
</span></span><span style=display:flex><span>    <span style=color:#f92672>action</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>alias</span>: <span style=color:#ae81ff>Publish notification</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>service</span>: <span style=color:#ae81ff>mqtt.publish</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>topic</span>: <span style=color:#e6db74>&#34;[PREFIX]/notify&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>payload</span>: &gt;-<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;text&#34;: &#34;DING DONG&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;icon&#34;: &#34;44330&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;rainbow&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;hold&#34;: true,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;pushIcon&#34;: 0,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;sound&#34;: &#34;john&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          }</span>          
</span></span><span style=display:flex><span>    - <span style=color:#f92672>delay</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>minutes</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>alias</span>: <span style=color:#ae81ff>Dismiss notification</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>service</span>: <span style=color:#ae81ff>mqtt.publish</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>topic</span>: <span style=color:#e6db74>&#34;[PREFIX]/notify/dismiss&#34;</span>
</span></span></code></pre></div><p>This automation will send to doorbell notification (including melody, icon, and text) and will dismiss is 1 minute later
so the desktop clock can go back to scrolling through its regular apps.</p><h2 id=closure>Closure</h2><p>There&rsquo;s a lot more you can do with this device and with the Awtrix Light firmware.
For example, you can use it as an <a href=https://blueforcer.github.io/awtrix-light/#/alarm title="Awtrix Light alarm clock" rel=external target=_blank>alarm clock</a> and display your own <a href=https://blueforcer.github.io/awtrix-light/#/custom title="Awtrix Light custom pages" rel=external target=_blank>custom apps</a>.</p><p>I will be playing around with this device a lot more in the near future,
using it to showcase nice-to-know information and to alert me of important things.
Think of also displaying air quality or CO2 levels or energy consumption.
Or an &ldquo;on-call&rdquo; notification to alert your family members not to disturb you.</p></main><hr><footer><div class=footer><p><div class=previous-post><a href="https://dev.sequr.be/blog/2023/02/manage-mercedes-ev-preconditioning-from-home-assistant/?ref=footer"><span style=font-weight:700>« Previous</span><br>Manage Mercedes EV preconditioning from Home...</a><div class=next-post><a href="https://dev.sequr.be/blog/2023/07/darebee-daily-challenge-on-home-assistant-dashboard/?ref=footer"><span style=font-weight:700>Next »</span><br>Darebee daily challenge on Home Assistant...</a></div></p></div></footer></article></section><aside class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#flashing-awtrix-on-the-ulanzi-tc001>Flashing Awtrix on the Ulanzi TC001</a><ul><li><a href=#preparations-for-flashing>Preparations for flashing</a></li><li><a href=#backup-stock-firmware>Backup stock firmware</a></li><li><a href=#flashing-awtrix-firmware>Flashing Awtrix firmware</a></li></ul></li><li><a href=#connecting-to-home-assistant>Connecting to Home Assistant</a></li><li><a href=#sending-notifications-to-the-tc001>Sending notifications to the TC001</a><ul><li><a href=#icon>Icon</a></li><li><a href=#melody>Melody</a></li><li><a href=#notification>Notification</a></li><li><a href=#automation>Automation</a></li></ul></li><li><a href=#closure>Closure</a></li></ul></nav></div></aside></div></body></html>